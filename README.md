### 背景

1. 保证消息可靠消费 （特殊场景不会遗漏消息: 服务重启,pod宕机） 
2. 支持重试可配置(对1的补充) MAX-TTR 超时时间
3. 实时性,保证秒级别
4. 支持消息删除
5. 多topic设计，支持不同的场景
6. 满足分布式场景(可能有多个pod) 无状态设计

### 原设计思路


Job
id // job标识
topic // 主题 发布订阅主题
status // 状态
invoke_time // 激活时间
created_at // 创建时间 
updated_at // 更新时间


status:  

ready : 准备状态,入库
invokerd: 唤起状态,准备消费 
deleted 


### 队列消费的幂等性

1. 支持消息重试，不会影响到业务结果

举个例子：      
理解成柔性事务 不可能出现购买商品，没扣除库存的情况
举个例子： TCC （订单是否完成 - 修改订单状态为进行中 - 【async】【扣减用户金额成功 --- 扣减用户金额失败】 【async】【减少库存成功 ---- 减少库存失败】 --- 订单新增成功订单 -- 订单新增失败 ）

1. 执行成功 -- 返回ack